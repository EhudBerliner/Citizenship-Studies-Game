<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>×¡×™××•×œ×˜×•×¨: ×©×•××¨ ×”×“××•×§×¨×˜×™×” - ×’×¨×¡×” ××•×¨×—×‘×ª</title>
    <style>
        :root { --primary: #2c3e50; --blue: #3498db; --green: #2ecc71; --red: #e74c3c; --bg: #f4f7f6; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); margin: 0; padding: 10px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        
        #game-box { width: 100%; max-width: 500px; background: white; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); padding: 20px; position: relative; }
        
        .status-bar { display: flex; justify-content: space-between; margin-bottom: 15px; background: #f8f9fa; padding: 12px; border-radius: 12px; font-weight: bold; font-size: 0.9rem; }
        
        .scenario-container { min-height: 120px; margin: 15px 0; padding: 15px; background: #fff8e1; border-right: 5px solid #ffc107; border-radius: 8px; font-size: 1.1rem; line-height: 1.5; }
        
        .options-grid { display: grid; grid-template-columns: 1fr; gap: 10px; }
        button { padding: 16px; border: none; border-radius: 12px; background: var(--primary); color: white; font-weight: bold; font-size: 1rem; cursor: pointer; transition: 0.2s; box-shadow: 0 4px 0 #1a252f; }
        button:active { transform: translateY(2px); box-shadow: none; }
        button:disabled { opacity: 0.5; cursor: not-allowed; }

        #feedback-overlay { 
            display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(255,255,255,0.98); z-index: 100; flex-direction: column; 
            align-items: center; justify-content: center; padding: 25px; text-align: center; border-radius: 20px;
        }
        .feedback-text { font-size: 1.15rem; margin-bottom: 20px; color: #333; }
        .continue-btn { background: var(--green); box-shadow: 0 4px 0 #27ae60; width: 150px; }
    </style>
</head>
<body>

<div id="game-box">
    <div id="feedback-overlay">
        <h2 id="feedback-title"></h2>
        <div id="feedback-msg" class="feedback-text"></div>
        <button class="continue-btn" onclick="nextStep()">×”××©×š</button>
    </div>

    <h1 style="text-align:center; font-size: 1.4rem; margin: 0 0 15px 0;">ğŸ›ï¸ ×¡×™××•×œ×˜×•×¨: ×× ×”×™×’×™ ×”××“×™× ×”</h1>
    
    <div class="status-bar">
        <span>×©×œ×‘: <span id="lvl">1</span>/8</span>
        <span>× ×§×•×“×•×ª ×™×¦×™×‘×•×ª: <span id="stab">100</span>%</span>
    </div>

    <div id="game-content">
        <div class="scenario-container" id="scenario">×˜×•×¢×Ÿ...</div>
        <div class="options-grid" id="options"></div>
    </div>
</div>

<script>
    const levels = [
        {
            text: "×‘×¢×ª ×›×ª×™×‘×ª ×”××’×™×œ×”, ×¢×•×œ×” ×“×¨×™×©×” ×œ×”×¡×‘×™×¨ ××“×•×¢ ×œ×¢× ×”×™×”×•×“×™ ×™×© ×–×›×•×ª ×¢×œ ×”××¨×¥ ×œ×œ× ×§×©×¨ ×œ××™×©×•×¨ ××”×¢×•×œ×. ×‘××™×–×• ×”×¦×“×§×” × ×©×ª××©?",
            opts: [
                { t: "×”×¦×“×§×” ×˜×‘×¢×™×ª/××•× ×™×‘×¨×¡××œ×™×ª", c: true, e: "× ×›×•×Ÿ! ×”×–×›×•×ª ×œ×”×’×“×¨×” ×¢×¦××™×ª ×”×™× ×–×›×•×ª ×˜×‘×¢×™×ª ×©×œ ×›×œ ×¢× ×•×œ× ×ª×œ×•×™×” ×‘××™×©×•×¨ ×‘×™× ×œ××•××™." },
                { t: "×”×¦×“×§×” ××©×¤×˜×™×ª", c: false, e: "×œ× ××“×•×™×§. ×”×¦×“×§×” ××©×¤×˜×™×ª × ×©×¢× ×ª ×¢×œ ×”×—×œ×˜×•×ª ×‘×™× ×œ××•××™×•×ª (×›××• ×”××•\"×), ×œ× ×¢×œ ×–×›×•×ª ×˜×‘×¢×™×ª." }
            ]
        },
        {
            text: "×”××œ×—××” ×‘×¢×™×¦×•××”. ×“×•×“ ×‘×Ÿ ×’×•×¨×™×•×Ÿ ×¨×•×¦×” ×œ×¤× ×•×ª ×œ×ª×•×©×‘×™× ×”×¢×¨×‘×™× ×©× ××¦××™× ×‘×ª×•×š ×”××“×™× ×” ×”×—×“×©×”. ××” × ×‘×˜×™×— ×œ×”× ×‘××’×™×œ×”?",
            opts: [
                { t: "××•×˜×•× ×•××™×” × ×¤×¨×“×ª", c: false, e: "×œ×. ×”××’×™×œ×” ××‘×˜×™×—×” ××–×¨×—×•×ª ××œ××” ×•×©×•×•×” ×‘×ª×•×š ×”××“×™× ×”." },
                { t: "××–×¨×—×•×ª ××œ××” ×•×™×™×¦×•×’ ×‘××•×¡×“×•×ª", c: true, e: "××“×•×™×§! ×”××’×™×œ×” ×§×•×¨××ª ×œ×”× ×œ×™×˜×•×œ ×—×œ×§ ×‘×‘× ×™×™×Ÿ ×”××“×™× ×” ×¢×œ ×™×¡×•×“ ××–×¨×—×•×ª ××œ××” ×•×©×•×•×”." }
            ]
        },
        {
            text: "×™×©×¨××œ ×¨×•×¦×” ×œ×”×™×× ×¢ ××¤×™×¦×•×œ ×™×ª×¨ ×©×œ ××¤×œ×’×•×ª ×§×˜× ×•×ª ×‘×›× ×¡×ª ×›×“×™ ×œ×™×™×¦×‘ ××ª ×”×××©×œ×”. ×‘××™×–×” ×›×œ×™ × ×©×ª××©?",
            opts: [
                { t: "××—×•×– ×”×—×¡×™××”", c: true, e: "× ×›×•×Ÿ! ××—×•×– ×”×—×¡×™××” (3.25%) × ×•×¢×“ ×œ×× ×•×¢ ×××¤×œ×’×•×ª ×§×˜× ×•×ª ×××•×“ ×œ×”×™×›× ×¡ ×œ×›× ×¡×ª ×•×œ×¤×¦×œ ××•×ª×”." },
                { t: "×‘×—×™×¨×•×ª ×—×©××™×•×ª", c: false, e: "×œ×. ×—×©××™×•×ª × ×•×¢×“×” ×œ×”×’×Ÿ ×¢×œ ×—×•×¤×© ×”×”×¦×‘×¢×”, ×œ× ×¢×œ ×™×¦×™×‘×•×ª ×”×××©×œ×”." }
            ]
        },
        {
            text: "×—×‘×¨ ×›× ×¡×ª ××”××•×¤×•×–×™×¦×™×” ×˜×•×¢×Ÿ ×©×”×××©×œ×” ×¤×•×¢×œ×ª ×¨×¢ ×××•×“. ××”×• ×”×›×œ×™ ×”××”×™×¨ ×‘×™×•×ª×¨ ×©×œ×• ×œ×”×¤×™×œ ××•×ª×”?",
            opts: [
                { t: "×”×’×©×ª ×©××™×œ×ª×”", c: false, e: "×œ×. ×©××™×œ×ª×” ×”×™× ×¨×§ ×›×œ×™ ×œ×§×‘×œ×ª ××™×“×¢, ×”×™× ×œ× ××¤×™×œ×” ×××©×œ×”." },
                { t: "×”×¦×‘×¢×ª ××™ ×××•×Ÿ", c: true, e: "× ×›×•×Ÿ! ×‘×¨×•×‘ ×©×œ 61 ×—\"×›×™× ×”×›× ×¡×ª ×™×›×•×œ×” ×œ×¡×™×™× ××ª ×›×”×•× ×ª ×”×××©×œ×”." }
            ]
        },
        {
            text: "×©×¨×ª ×”×—×™× ×•×š ×¨×•×¦×” ×œ×§×“× ×—×•×§ ×—×“×©, ××š ×™×© ×”×ª× ×’×“×•×ª ×¨×‘×” ×‘×¦×™×‘×•×¨. ×”×™×›×Ÿ ×™×ª×§×™×™× ×”×“×™×•×Ÿ ×”××§×¦×•×¢×™ ×”××¢××™×§ ×¢× ××•××—×™×?",
            opts: [
                { t: "×‘×•×•×¢×“×•×ª ×”×›× ×¡×ª", c: true, e: "×‘×“×™×•×§. ×”×•×•×¢×“×•×ª ×”×Ÿ ×”××§×•× ×œ×“×™×•×Ÿ ×‘×¤×¨×˜×™×, × ×™×¡×•×— ×•×©×™×— ×¢× ×× ×©×™ ××§×¦×•×¢." },
                { t: "×‘××œ×™××ª ×”×›× ×¡×ª", c: false, e: "×œ×. ×”××œ×™××” ×”×™× ×”××§×•× ×œ×“×™×•× ×™× ×›×œ×œ×™×™× ×•×œ×”×¦×‘×¢×•×ª ×¡×•×¤×™×•×ª." }
            ]
        },
        {
            text: "×”××“×™× ×” ×§×‘×¢×” ×©×›×œ ×”××¨×¥ ×”×™× ××–×•×¨ ×‘×—×™×¨×” ××—×“. ××™×–×” ×¨×›×™×‘ ×‘×©×™×˜×ª ×”×‘×—×™×¨×•×ª ×–×” ××ª××¨?",
            opts: [
                { t: "×¨×›×™×‘ ×™×—×¡×™", c: false, e: "×œ×. ×™×—×¡×™ ××ª×™×™×—×¡ ×œ×—×œ×•×§×ª ×”×× ×“×˜×™× ×œ×¤×™ ××—×•×– ×”×§×•×œ×•×ª." },
                { t: "×¨×›×™×‘ ××¨×¦×™", c: true, e: "× ×›×•×Ÿ! ×¨×›×™×‘ ××¨×¦×™ ××•××¨ ×©×›×œ ×”××“×™× ×” × ×—×©×‘×ª ××–×•×¨ ××—×“ ×•×œ× ××—×•×œ×§×ª ×œ××—×•×–×•×ª." }
            ]
        },
        {
            text: "×‘××’×™×œ×” × ×›×ª×‘ ×©×”××“×™× ×” ×ª×”×™×” ×¤×ª×•×—×” ×œ'×§×™×‘×•×¥ ×’×œ×•×™×•×ª'. ××™×–×” ××•×¤×™ ×–×” ××¢× ×™×§ ×œ××“×™× ×”?",
            opts: [
                { t: "××•×¤×™ ×™×”×•×“×™", c: true, e: "× ×›×•×Ÿ. ×¢×œ×™×™×” ×•×§×™×‘×•×¥ ×’×œ×•×™×•×ª ×”× ×××¤×™×™× ×™× ×™×”×•×“×™×™× ××•×‘×”×§×™× ×©×œ ×”××“×™× ×”." },
                { t: "××•×¤×™ ×“××•×§×¨×˜×™", c: false, e: "×œ×. ×—×•×¤×© ×“×ª ××• ×©×•×•×™×•×Ÿ ×”× ×“××•×§×¨×˜×™×™×, ×§×™×‘×•×¥ ×’×œ×•×™×•×ª ×”×•× ×™×”×•×“×™." }
            ]
        },
        {
            text: "×”×××©×œ×” ×œ× ×”×¦×œ×™×—×” ×œ×”×¢×‘×™×¨ ××ª ×”×ª×§×¦×™×‘ ×¢×“ ×”××•×¢×“ ×”××—×¨×•×Ÿ. ××” ×§×•×¨×” ×¢×›×©×™×•?",
            opts: [
                { t: "×”×××©×œ×” ××•×—×œ×¤×ª ×‘××•×¤×Ÿ ××•×˜×•××˜×™", c: false, e: "×œ× ××“×•×™×§. ×”×›× ×¡×ª ××ª×¤×–×¨×ª ×•×”×•×œ×›×™× ×œ×‘×—×™×¨×•×ª ×—×“×©×•×ª." },
                { t: "×”×›× ×¡×ª ××ª×¤×–×¨×ª ×•×”×•×œ×›×™× ×œ×‘×—×™×¨×•×ª", c: true, e: "× ×›×•×Ÿ! ×œ×¤×™ ×”×—×•×§, ××™ ××™×©×•×¨ ×ª×§×¦×™×‘ ××•×‘×™×œ ×œ×¤×™×–×•×¨ ×”×›× ×¡×ª." }
            ]
        }
    ];

    let current = 0;
    let stability = 100;
    let lock = false;

    function render() {
        if (current >= levels.length) { finish(); return; }
        lock = false;
        const data = levels[current];
        document.getElementById('scenario').innerText = data.text;
        document.getElementById('lvl').innerText = current + 1;
        document.getElementById('stab').innerText = stability;
        
        const optsDiv = document.getElementById('options');
        optsDiv.innerHTML = '';
        data.opts.forEach(o => {
            const b = document.createElement('button');
            b.innerText = o.t;
            b.onclick = () => handle(o);
            optsDiv.appendChild(b);
        });
    }

    function handle(o) {
        if (lock) return;
        lock = true;
        const overlay = document.getElementById('feedback-overlay');
        const title = document.getElementById('feedback-title');
        const msg = document.getElementById('feedback-msg');

        if (o.c) {
            title.innerText = "×”×—×œ×˜×” × ×‘×•× ×”! â­";
            title.style.color = "var(--green)";
        } else {
            stability -= 15;
            title.innerText = "×˜×¢×•×ª ×‘×©×œ×˜×•×Ÿ... âš ï¸";
            title.style.color = "var(--red)";
        }
        msg.innerText = o.e;
        overlay.style.display = 'flex';
    }

    function nextStep() {
        document.getElementById('feedback-overlay').style.display = 'none';
        current++;
        render();
    }

    function finish() {
        const box = document.getElementById('game-box');
        const finalStatus = stability > 50 ? "×”×“××•×§×¨×˜×™×” ×™×¦×™×‘×”!" : "×”××“×™× ×” ×‘××©×‘×¨...";
        box.innerHTML = `<div style="text-align:center; padding: 20px;">
            <h2 style="color:var(--primary)">${finalStatus}</h2>
            <p style="font-size:1.2rem;">×¡×™×™××ª ××ª ×›×œ ×”×ª×¨×—×™×©×™× ××”×§×•×‘×¥.</p>
            <p>×™×¦×™×‘×•×ª ×¡×•×¤×™×ª: <b>${Math.max(0, stability)}%</b></p>
            <button onclick="location.reload()" style="background:var(--blue); width:100%">× ×¡×” ×©×•×‘</button>
        </div>`;
    }

    render();
</script>
</body>
</html>
